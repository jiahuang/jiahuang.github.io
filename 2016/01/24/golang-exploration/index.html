<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Exploration in golang | Jia Huang</title><meta name="description"><meta name="generator" content="Jia Huang"><meta name="author" content="Jia Huang"><meta name="keywords" content="jia huang, node.js, javascript, golang, scala, development"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" href="/images/svdb.png"><link rel="icon" type="image/png" href="/images/svdb.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/svdb.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><img src="/images/profile.png"><h1><a href="/" alt="Jia Huang" title="Jia Huang" itemprop="headline">Jia Huang</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/articles" alt="Writings" title="Writings" itemprop="url">Writings</a></li><li itemprop="name"><a href="/talks" alt="Talks" title="Talks" itemprop="url">Talks</a></li><li itemprop="name"><a href="/projects" alt="Projects" title="Projects" itemprop="url">Projects</a></li><li itemprop="name"><a href="/about" alt="About" title="About" itemprop="url">About</a></li><li><a href="https://github.com/jiahuang"> <img src="/images/github.png" style="height:25px;"></a><a href="https://twitter.com/jia"> <img src="/images/twitter.png" style="height:30px;"></a></li></ul></nav></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Exploration in golang</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2016-01-24T08:19:09.000Z"> Sunday, January 24th 2016 at 0:19</time><br>Last updated on<time itemprop="dateModified" datetime="2016-01-24T08:19:09.000Z"> Sunday, April 24th 2016 at 16:27</time></span><p>At work I’ve been using a lot of Scala. Since I’ve made the switch, I’ve seen a lot of posts on teams moving away from Scala:</p>
<ul>
<li><a href="http://jimplush.com/talk/2015/12/19/moving-a-team-from-scala-to-golang/" target="_blank" rel="external">CrowdStrike</a></li>
<li><a href="http://devslovebacon.com/conferences/bacon-2013/talks/why-node-and-scala-will-dry-up-go-will-drink-their-milkshake" target="_blank" rel="external">Paul Dix</a></li>
<li><a href="https://codahale.com/downloads/email-to-donald.txt" target="_blank" rel="external">Yammer moving away from Scala</a></li>
</ul>
<p>The TLDR version of all 3 was that Scala is too expressive and unopinionated, leading to different coders having vastly different styles and eventually becoming cumbersome for a large team to handle. In effect, there’s extra overhead for each programmer added on to the team.</p>
<p>I believe that the tools you use every day shape the fundamental way you approach and solve problems. So if the failure mode of Scala is being too <em>unopinionated</em> maybe learning an <em>opinionated</em> language like Golang will help me avoid some Scala pitfalls. Will this actually work? IDK.</p>
<h2 id="Installation-on-OSX"><a href="#Installation-on-OSX" class="headerlink" title="Installation on OSX"></a>Installation on OSX</h2><p>Install golang: <a href="https://golang.org/dl/" target="_blank" rel="external">https://golang.org/dl/</a></p>
<p>The OSX package installs to <code>/usr/local/go</code>, so add <code>/usr/local/go/bin</code> to the <code>PATH</code> in <code>~/.bashrc</code> or <code>~/.zhrc</code> file.</p>
<p>Golang requires that all the libraries &amp; code be structured in a certain way:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~/jia/go</span><br><span class="line">  /bin</span><br><span class="line">    project1Binary</span><br><span class="line">  /pkg</span><br><span class="line">  /src</span><br><span class="line">    /project1</span><br><span class="line">    /project2</span><br></pre></td></tr></table></figure>
<p>Where <code>~/jia/go</code> is my <code>$GOPATH</code>. <code>$GOPATH</code> has to be added into the path, otherwise there’s a build error. The golang page <a href="https://golang.org/doc/code.html" target="_blank" rel="external">explains it in detail</a>.</p>
<h2 id="First-App"><a href="#First-App" class="headerlink" title="First App"></a>First App</h2><p>I warmed up with a few problems from <a href="https://projecteuler.net/" target="_blank" rel="external">Project Euler</a> to learn golang syntax. The last few times I’ve tried to learn a language from scratch I jump directly into a project, but then I spend too long context switching between both the project task and writing idiomatic JS/Python/Scala, etc.  </p>
<p>Then I made this <a href="https://github.com/jiahuang/7minworkout" target="_blank" rel="external">7minworkout app</a> that runs in the terminal. It has gifs like this:</p>
<p><img src="https://raw.githubusercontent.com/jiahuang/7minworkout/master/workout.gif" alt="demo"></p>
<p>Ok, so maybe the app was mostly an exploration in emoticons. But in the process I ended up writing a really simple multi-line terminal animation library.</p>
<p>The majority of the logic is in 80 very spaced out lines.</p>
<p>Object creation looks like C. This declares an Animation struct that has an array of arrays with strings for the animation buffer:<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Animation <span class="keyword">struct</span> &#123;</span><br><span class="line">  frames [][]<span class="keyword">string</span></span><br><span class="line">  loop <span class="keyword">int</span></span><br><span class="line">  delay time.Duration</span><br><span class="line">  timeout <span class="keyword">chan</span> <span class="keyword">bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Animations can be instantiated with<br><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s := &amp;Animation&#123;</span><br><span class="line">    frames: &#123;&#123;<span class="string">"this is the first line"</span>&#125;, &#123;<span class="string">"line 2 first frame"</span>, <span class="string">"line 2nd frame"</span>&#125;&#125;,</span><br><span class="line">    loop: <span class="number">2</span>,</span><br><span class="line">    delay: <span class="number">500</span>*time.Millisecond,</span><br><span class="line">    timeout: <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">s.Start()</span><br></pre></td></tr></table></figure></p>
<p>The full source of the app is <a href="https://github.com/jiahuang/7minworkout" target="_blank" rel="external">here on github</a>.</p>
</article></main></body></html>